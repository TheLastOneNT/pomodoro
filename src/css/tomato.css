/* Основной контейнер */
.tomato {
  --size: clamp(260px, 46vw, 520px);
  width: var(--size);
  height: var(--size);
  position: relative;
  display: grid;
  place-items: center;
  border: 0;
  background: transparent;
}

/* PNG */
.tomato__img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  user-select: none;
  pointer-events: none;
  transform-origin: 50% 60%;
}

/* мягкая тень под плодом */
.tomato__shadow {
  position: absolute;
  left: 50%;
  bottom: -1.5%;
  width: 56%;
  height: 10%;
  transform: translateX(-50%);
  background: radial-gradient(
    50% 50% at 50% 50%,
    rgba(0, 0, 0, 0.35),
    transparent 70%
  );
  filter: blur(2px);
  pointer-events: none;
}

/* прогресс-дуга */
.tomato__progress {
  position: absolute;
  inset: -6%;
  width: 112%;
  height: 112%;
  pointer-events: none;
}

/* Цвет прогресса зависит от темы */
.stage {
  color: var(--accent-night);
}
body.day .stage {
  color: var(--accent-day);
}

/* лёгкие "живые" движения */
@keyframes breathe {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.012);
  }
}
@keyframes floatY {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-1.2%);
  }
}

/* состояния */
.tomato.mode-idle .tomato__img {
  animation: floatY 6s ease-in-out infinite;
}
.tomato.mode-focus .tomato__img {
  animation: breathe 3.8s ease-in-out infinite, floatY 5.5s ease-in-out infinite;
}
.tomato.mode-break .tomato__img {
  animation: breathe 6.5s ease-in-out infinite, floatY 7.5s ease-in-out infinite;
}
