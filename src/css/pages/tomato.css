/* Минималистичная кнопка Pomodoro */
.tomato {
  --size: clamp(260px, 46vw, 520px);
  --ring-color: var(--accent-idle);
  --leaf-from: #a855f7;
  --leaf-to: #6366f1;
  --core-mid: rgba(131, 76, 196, 0.62);
  --core-deep: rgba(19, 10, 46, 0.95);
  width: var(--size);
  aspect-ratio: 1;
  position: relative;
  display: grid;
  place-items: center;
  box-sizing: border-box;
  padding: clamp(26px, 4vw, 36px);
  border: 0;
  border-radius: 999px;
  background: radial-gradient(
      130% 120% at 50% 12%,
      rgba(255, 255, 255, 0.18) 0%,
      rgba(10, 12, 22, 0.92) 64%,
      rgba(3, 4, 11, 0.96) 100%
    ),
    linear-gradient(200deg, rgba(4, 6, 14, 0.92), rgba(2, 3, 8, 0.98));
  color: var(--ring-color);
  box-shadow:
    0 40px 82px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.04);
  transition:
    color 0.4s ease,
    background 0.5s ease,
    box-shadow 0.5s ease;
}

.tomato::before {
  content: '';
  position: absolute;
  inset: clamp(14px, 3vw, 20px);
  border-radius: inherit;
  background: radial-gradient(
    75% 70% at 50% 26%,
    color-mix(in srgb, var(--ring-color) 25%, transparent) 0%,
    transparent 68%
  );
  filter: blur(28px);
  opacity: 0.8;
  z-index: 0;
}

.tomato:focus-visible {
  outline: 3px solid var(--ring-color);
  outline-offset: 12px;
}

.tomato__progress {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.tomato__progress circle {
  fill: none;
  stroke: currentColor;
  stroke-width: 14px;
  stroke-linecap: round;
  transform: rotate(-90deg);
  transform-origin: 50% 50%;
  opacity: 0.88;
  transition: stroke 0.4s ease, opacity 0.4s ease;
}

.tomato__body {
  position: relative;
  z-index: 2;
  width: 100%;
  height: 100%;
  border-radius: 46% 46% 48% 48% / 54% 54% 50% 50%;
  background:
    radial-gradient(circle at 32% 28%, rgba(255, 255, 255, 0.2), transparent 40%),
    radial-gradient(circle at 70% 82%, rgba(0, 0, 0, 0.55), transparent 58%),
    radial-gradient(circle at 50% 50%, var(--core-mid), var(--core-deep) 68%, rgba(5, 6, 16, 0.94) 100%);
  box-shadow:
    inset 0 22px 40px rgba(255, 255, 255, 0.1),
    inset 0 -28px 36px rgba(0, 0, 0, 0.78);
  overflow: hidden;
  pointer-events: none;
}

.tomato__body::before {
  content: '';
  position: absolute;
  inset: 20% 24% 32% 26%;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2), transparent 70%);
  opacity: 0.6;
  mix-blend-mode: screen;
}

.tomato__leaf,
.tomato__leaf::after {
  position: absolute;
  top: -12%;
  width: 40%;
  aspect-ratio: 2.6 / 1;
  border-radius: 120% 120% 60% 60%;
  content: '';
  background: linear-gradient(128deg, rgba(255, 255, 255, 0.24), var(--leaf-to));
  filter: drop-shadow(0 16px 30px rgba(0, 0, 0, 0.45));
}

.tomato__leaf {
  left: 20%;
  background: linear-gradient(120deg, rgba(255, 255, 255, 0.28), var(--leaf-from));
  transform: rotate(-12deg);
}

.tomato__leaf::after {
  left: 68%;
  top: 8%;
  width: 78%;
  background: linear-gradient(122deg, rgba(255, 255, 255, 0.2), var(--leaf-to));
  transform: rotate(18deg);
}

.tomato__seed {
  position: absolute;
  width: 18%;
  aspect-ratio: 1;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.75), transparent 70%);
  opacity: 0.78;
  mix-blend-mode: screen;
}

.tomato__seed--l {
  left: 22%;
  top: 46%;
}

.tomato__seed--r {
  right: 20%;
  top: 38%;
}

.tomato__seed--b {
  left: 44%;
  bottom: 20%;
  width: 16%;
}

.tomato.mode-idle {
  --ring-color: var(--accent-idle);
  --leaf-from: #a855f7;
  --leaf-to: #6366f1;
  --core-mid: rgba(131, 76, 196, 0.62);
  --core-deep: rgba(19, 10, 46, 0.95);
}

.tomato.mode-focus {
  --ring-color: var(--accent-focus);
  --leaf-from: #facc15;
  --leaf-to: #fb923c;
  --core-mid: rgba(255, 204, 0, 0.68);
  --core-deep: rgba(36, 20, 0, 0.92);
}

.tomato.mode-break {
  --ring-color: var(--accent-break);
  --leaf-from: #34d399;
  --leaf-to: #22d3ee;
  --core-mid: rgba(34, 211, 178, 0.62);
  --core-deep: rgba(6, 32, 26, 0.92);
}

.tomato.mode-pause {
  --ring-color: var(--accent-pause);
  --leaf-from: #fb923c;
  --leaf-to: #f97316;
  --core-mid: rgba(253, 186, 116, 0.6);
  --core-deep: rgba(39, 18, 5, 0.92);
}

body.day .tomato {
  background: radial-gradient(
      120% 120% at 50% 10%,
      rgba(255, 255, 255, 0.82) 0%,
      rgba(231, 236, 255, 0.9) 65%,
      rgba(216, 224, 244, 0.9) 100%
    ),
    linear-gradient(200deg, rgba(255, 255, 255, 0.92), rgba(220, 228, 254, 0.94));
  box-shadow:
    0 32px 68px rgba(18, 26, 56, 0.18),
    0 0 0 1px rgba(17, 19, 24, 0.08),
    inset 0 0 0 1px rgba(255, 255, 255, 0.6);
}

body.day .tomato::before {
  background: radial-gradient(
    78% 72% at 50% 26%,
    color-mix(in srgb, var(--ring-color) 22%, rgba(255, 255, 255, 0.86)) 0%,
    transparent 70%
  );
  filter: blur(22px);
}

body.day .tomato__progress circle {
  opacity: 0.7;
}
